<!DOCTYPE html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head layout:fragment="head">
    <title th:text="${pageTitle ?: 'IINCADE 4.0 – Mesa de Partes'}">IINCADE 4.0 – Mesa de Partes</title>

    <!-- CSRF Meta Tags for AJAX requests -->
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Estilos propios -->
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
</head>
<body class="dark-theme">

    <div layout:fragment="body">
        <div id="page-app">
            <!-- Header -->
            <div th:replace="~{fragments/header :: header}"></div>

            <div class="d-flex">
                <!-- Sidebar -->
                <div th:replace="~{fragments/sidebar :: sidebar(${activeMenu ?: null})}"></div>

                <!-- Main Content -->
                <main class="main-content p-4 flex-fill">
                    <div th:replace="~{fragments/breadcrumbs :: breadcrumbs(${breadcrumbs ?: null})}"></div>

                    <!-- Page Content -->
                    <section layout:fragment="content">
                        <!-- El contenido específico de cada página se insertará aquí -->
                    </section>
                </main>
            </div>

            <!-- Footer -->
            <div th:replace="~{fragments/footer :: footer}"></div>
        </div>

        <!-- Bootstrap Bundle -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

        <!-- PDF Generation -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

        <!-- API Client -->
        <script th:src="@{/js/api.js}"></script>

        <!-- Scripts propios -->
        <script th:src="@{/js/script.js}"></script>

        <!-- Scripts específicos de la página -->
        <th:block layout:fragment="scripts"></th:block>

        <!-- Toast Container -->
        <div id="toasts-wrapper" class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1080" aria-live="polite" aria-atomic="true"></div>
    </div>

</body>
</html>